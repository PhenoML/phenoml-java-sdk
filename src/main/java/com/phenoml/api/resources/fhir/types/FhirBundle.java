/**
 * This file was auto-generated by Fern from our API Definition.
 */
package com.phenoml.api.resources.fhir.types;

import com.fasterxml.jackson.annotation.JsonAnyGetter;
import com.fasterxml.jackson.annotation.JsonAnySetter;
import com.fasterxml.jackson.annotation.JsonCreator;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.annotation.JsonSetter;
import com.fasterxml.jackson.annotation.JsonValue;
import com.fasterxml.jackson.annotation.Nulls;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import com.phenoml.api.core.ObjectMappers;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Objects;
import java.util.Optional;

@JsonInclude(JsonInclude.Include.NON_ABSENT)
@JsonDeserialize(builder = FhirBundle.Builder.class)
public final class FhirBundle {
    private final Optional<Integer> total;

    private final List<EntryItem> entry;

    private final Map<String, Object> additionalProperties;

    private FhirBundle(Optional<Integer> total, List<EntryItem> entry, Map<String, Object> additionalProperties) {
        this.total = total;
        this.entry = entry;
        this.additionalProperties = additionalProperties;
    }

    /**
     * @return Always &quot;Bundle&quot; for bundle resources
     */
    @JsonProperty("resourceType")
    public String getResourceType() {
        return "Bundle";
    }

    /**
     * @return Total number of resources that match the search criteria.
     * Optional field as not all FHIR servers include it (e.g., Medplum).
     */
    @JsonProperty("total")
    public Optional<Integer> getTotal() {
        return total;
    }

    /**
     * @return Array of bundle entries containing resources or operation results
     */
    @JsonProperty("entry")
    public List<EntryItem> getEntry() {
        return entry;
    }

    @java.lang.Override
    public boolean equals(Object other) {
        if (this == other) return true;
        return other instanceof FhirBundle && equalTo((FhirBundle) other);
    }

    @JsonAnyGetter
    public Map<String, Object> getAdditionalProperties() {
        return this.additionalProperties;
    }

    private boolean equalTo(FhirBundle other) {
        return total.equals(other.total) && entry.equals(other.entry);
    }

    @java.lang.Override
    public int hashCode() {
        return Objects.hash(this.total, this.entry);
    }

    @java.lang.Override
    public String toString() {
        return ObjectMappers.stringify(this);
    }

    public static Builder builder() {
        return new Builder();
    }

    @JsonIgnoreProperties(ignoreUnknown = true)
    public static final class Builder {
        private Optional<Integer> total = Optional.empty();

        private List<EntryItem> entry = new ArrayList<>();

        @JsonAnySetter
        private Map<String, Object> additionalProperties = new HashMap<>();

        private Builder() {}

        public Builder from(FhirBundle other) {
            total(other.getTotal());
            entry(other.getEntry());
            return this;
        }

        /**
         * <p>Total number of resources that match the search criteria.
         * Optional field as not all FHIR servers include it (e.g., Medplum).</p>
         */
        @JsonSetter(value = "total", nulls = Nulls.SKIP)
        public Builder total(Optional<Integer> total) {
            this.total = total;
            return this;
        }

        public Builder total(Integer total) {
            this.total = Optional.ofNullable(total);
            return this;
        }

        /**
         * <p>Array of bundle entries containing resources or operation results</p>
         */
        @JsonSetter(value = "entry", nulls = Nulls.SKIP)
        public Builder entry(List<EntryItem> entry) {
            this.entry.clear();
            if (entry != null) {
                this.entry.addAll(entry);
            }
            return this;
        }

        public Builder addEntry(EntryItem entry) {
            this.entry.add(entry);
            return this;
        }

        public Builder addAllEntry(List<EntryItem> entry) {
            if (entry != null) {
                this.entry.addAll(entry);
            }
            return this;
        }

        public FhirBundle build() {
            return new FhirBundle(total, entry, additionalProperties);
        }
    }

    @JsonInclude(JsonInclude.Include.NON_ABSENT)
    @JsonDeserialize(builder = EntryItem.Builder.class)
    public static final class EntryItem {
        private final Optional<Map<String, Object>> resource;

        private final Optional<Request> request;

        private final Optional<Response> response;

        private final Map<String, Object> additionalProperties;

        private EntryItem(
                Optional<Map<String, Object>> resource,
                Optional<Request> request,
                Optional<Response> response,
                Map<String, Object> additionalProperties) {
            this.resource = resource;
            this.request = request;
            this.response = response;
            this.additionalProperties = additionalProperties;
        }

        /**
         * @return The FHIR resource contained in this entry
         */
        @JsonProperty("resource")
        public Optional<Map<String, Object>> getResource() {
            return resource;
        }

        /**
         * @return Request information for transaction/batch bundles
         */
        @JsonProperty("request")
        public Optional<Request> getRequest() {
            return request;
        }

        /**
         * @return Response information for transaction/batch bundle responses
         */
        @JsonProperty("response")
        public Optional<Response> getResponse() {
            return response;
        }

        @java.lang.Override
        public boolean equals(Object other) {
            if (this == other) return true;
            return other instanceof EntryItem && equalTo((EntryItem) other);
        }

        @JsonAnyGetter
        public Map<String, Object> getAdditionalProperties() {
            return this.additionalProperties;
        }

        private boolean equalTo(EntryItem other) {
            return resource.equals(other.resource) && request.equals(other.request) && response.equals(other.response);
        }

        @java.lang.Override
        public int hashCode() {
            return Objects.hash(this.resource, this.request, this.response);
        }

        @java.lang.Override
        public String toString() {
            return ObjectMappers.stringify(this);
        }

        public static Builder builder() {
            return new Builder();
        }

        @JsonIgnoreProperties(ignoreUnknown = true)
        public static final class Builder {
            private Optional<Map<String, Object>> resource = Optional.empty();

            private Optional<Request> request = Optional.empty();

            private Optional<Response> response = Optional.empty();

            @JsonAnySetter
            private Map<String, Object> additionalProperties = new HashMap<>();

            private Builder() {}

            public Builder from(EntryItem other) {
                resource(other.getResource());
                request(other.getRequest());
                response(other.getResponse());
                return this;
            }

            /**
             * <p>The FHIR resource contained in this entry</p>
             */
            @JsonSetter(value = "resource", nulls = Nulls.SKIP)
            public Builder resource(Optional<Map<String, Object>> resource) {
                this.resource = resource;
                return this;
            }

            public Builder resource(Map<String, Object> resource) {
                this.resource = Optional.ofNullable(resource);
                return this;
            }

            /**
             * <p>Request information for transaction/batch bundles</p>
             */
            @JsonSetter(value = "request", nulls = Nulls.SKIP)
            public Builder request(Optional<Request> request) {
                this.request = request;
                return this;
            }

            public Builder request(Request request) {
                this.request = Optional.ofNullable(request);
                return this;
            }

            /**
             * <p>Response information for transaction/batch bundle responses</p>
             */
            @JsonSetter(value = "response", nulls = Nulls.SKIP)
            public Builder response(Optional<Response> response) {
                this.response = response;
                return this;
            }

            public Builder response(Response response) {
                this.response = Optional.ofNullable(response);
                return this;
            }

            public EntryItem build() {
                return new EntryItem(resource, request, response, additionalProperties);
            }
        }

        @JsonInclude(JsonInclude.Include.NON_ABSENT)
        @JsonDeserialize(builder = Response.Builder.class)
        public static final class Response {
            private final Optional<String> status;

            private final Optional<String> location;

            private final Map<String, Object> additionalProperties;

            private Response(
                    Optional<String> status, Optional<String> location, Map<String, Object> additionalProperties) {
                this.status = status;
                this.location = location;
                this.additionalProperties = additionalProperties;
            }

            @JsonProperty("status")
            public Optional<String> getStatus() {
                return status;
            }

            @JsonProperty("location")
            public Optional<String> getLocation() {
                return location;
            }

            @java.lang.Override
            public boolean equals(Object other) {
                if (this == other) return true;
                return other instanceof Response && equalTo((Response) other);
            }

            @JsonAnyGetter
            public Map<String, Object> getAdditionalProperties() {
                return this.additionalProperties;
            }

            private boolean equalTo(Response other) {
                return status.equals(other.status) && location.equals(other.location);
            }

            @java.lang.Override
            public int hashCode() {
                return Objects.hash(this.status, this.location);
            }

            @java.lang.Override
            public String toString() {
                return ObjectMappers.stringify(this);
            }

            public static Builder builder() {
                return new Builder();
            }

            @JsonIgnoreProperties(ignoreUnknown = true)
            public static final class Builder {
                private Optional<String> status = Optional.empty();

                private Optional<String> location = Optional.empty();

                @JsonAnySetter
                private Map<String, Object> additionalProperties = new HashMap<>();

                private Builder() {}

                public Builder from(Response other) {
                    status(other.getStatus());
                    location(other.getLocation());
                    return this;
                }

                @JsonSetter(value = "status", nulls = Nulls.SKIP)
                public Builder status(Optional<String> status) {
                    this.status = status;
                    return this;
                }

                public Builder status(String status) {
                    this.status = Optional.ofNullable(status);
                    return this;
                }

                @JsonSetter(value = "location", nulls = Nulls.SKIP)
                public Builder location(Optional<String> location) {
                    this.location = location;
                    return this;
                }

                public Builder location(String location) {
                    this.location = Optional.ofNullable(location);
                    return this;
                }

                public Response build() {
                    return new Response(status, location, additionalProperties);
                }
            }
        }

        @JsonInclude(JsonInclude.Include.NON_ABSENT)
        @JsonDeserialize(builder = Request.Builder.class)
        public static final class Request {
            private final Optional<Method> method;

            private final Optional<String> url;

            private final Map<String, Object> additionalProperties;

            private Request(Optional<Method> method, Optional<String> url, Map<String, Object> additionalProperties) {
                this.method = method;
                this.url = url;
                this.additionalProperties = additionalProperties;
            }

            @JsonProperty("method")
            public Optional<Method> getMethod() {
                return method;
            }

            @JsonProperty("url")
            public Optional<String> getUrl() {
                return url;
            }

            @java.lang.Override
            public boolean equals(Object other) {
                if (this == other) return true;
                return other instanceof Request && equalTo((Request) other);
            }

            @JsonAnyGetter
            public Map<String, Object> getAdditionalProperties() {
                return this.additionalProperties;
            }

            private boolean equalTo(Request other) {
                return method.equals(other.method) && url.equals(other.url);
            }

            @java.lang.Override
            public int hashCode() {
                return Objects.hash(this.method, this.url);
            }

            @java.lang.Override
            public String toString() {
                return ObjectMappers.stringify(this);
            }

            public static Builder builder() {
                return new Builder();
            }

            @JsonIgnoreProperties(ignoreUnknown = true)
            public static final class Builder {
                private Optional<Method> method = Optional.empty();

                private Optional<String> url = Optional.empty();

                @JsonAnySetter
                private Map<String, Object> additionalProperties = new HashMap<>();

                private Builder() {}

                public Builder from(Request other) {
                    method(other.getMethod());
                    url(other.getUrl());
                    return this;
                }

                @JsonSetter(value = "method", nulls = Nulls.SKIP)
                public Builder method(Optional<Method> method) {
                    this.method = method;
                    return this;
                }

                public Builder method(Method method) {
                    this.method = Optional.ofNullable(method);
                    return this;
                }

                @JsonSetter(value = "url", nulls = Nulls.SKIP)
                public Builder url(Optional<String> url) {
                    this.url = url;
                    return this;
                }

                public Builder url(String url) {
                    this.url = Optional.ofNullable(url);
                    return this;
                }

                public Request build() {
                    return new Request(method, url, additionalProperties);
                }
            }

            public static final class Method {
                public static final Method PATCH = new Method(Value.PATCH, "PATCH");

                public static final Method DELETE = new Method(Value.DELETE, "DELETE");

                public static final Method GET = new Method(Value.GET, "GET");

                public static final Method PUT = new Method(Value.PUT, "PUT");

                public static final Method POST = new Method(Value.POST, "POST");

                private final Value value;

                private final String string;

                Method(Value value, String string) {
                    this.value = value;
                    this.string = string;
                }

                public Value getEnumValue() {
                    return value;
                }

                @java.lang.Override
                @JsonValue
                public String toString() {
                    return this.string;
                }

                @java.lang.Override
                public boolean equals(Object other) {
                    return (this == other) || (other instanceof Method && this.string.equals(((Method) other).string));
                }

                @java.lang.Override
                public int hashCode() {
                    return this.string.hashCode();
                }

                public <T> T visit(Visitor<T> visitor) {
                    switch (value) {
                        case PATCH:
                            return visitor.visitPatch();
                        case DELETE:
                            return visitor.visitDelete();
                        case GET:
                            return visitor.visitGet();
                        case PUT:
                            return visitor.visitPut();
                        case POST:
                            return visitor.visitPost();
                        case UNKNOWN:
                        default:
                            return visitor.visitUnknown(string);
                    }
                }

                @JsonCreator(mode = JsonCreator.Mode.DELEGATING)
                public static Method valueOf(String value) {
                    switch (value) {
                        case "PATCH":
                            return PATCH;
                        case "DELETE":
                            return DELETE;
                        case "GET":
                            return GET;
                        case "PUT":
                            return PUT;
                        case "POST":
                            return POST;
                        default:
                            return new Method(Value.UNKNOWN, value);
                    }
                }

                public enum Value {
                    GET,

                    POST,

                    PUT,

                    PATCH,

                    DELETE,

                    UNKNOWN
                }

                public interface Visitor<T> {
                    T visitGet();

                    T visitPost();

                    T visitPut();

                    T visitPatch();

                    T visitDelete();

                    T visitUnknown(String unknownType);
                }
            }
        }
    }
}
