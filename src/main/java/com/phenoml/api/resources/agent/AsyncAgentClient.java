/**
 * This file was auto-generated by Fern from our API Definition.
 */
package com.phenoml.api.resources.agent;

import com.phenoml.api.core.ClientOptions;
import com.phenoml.api.core.RequestOptions;
import com.phenoml.api.core.Suppliers;
import com.phenoml.api.resources.agent.prompts.AsyncPromptsClient;
import com.phenoml.api.resources.agent.requests.AgentChatRequest;
import com.phenoml.api.resources.agent.requests.AgentCreateRequest;
import com.phenoml.api.resources.agent.requests.AgentGetChatMessagesRequest;
import com.phenoml.api.resources.agent.requests.AgentListRequest;
import com.phenoml.api.resources.agent.requests.AgentUpdateRequest;
import com.phenoml.api.resources.agent.types.AgentChatResponse;
import com.phenoml.api.resources.agent.types.AgentDeleteResponse;
import com.phenoml.api.resources.agent.types.AgentGetChatMessagesResponse;
import com.phenoml.api.resources.agent.types.AgentListResponse;
import com.phenoml.api.resources.agent.types.AgentResponse;
import com.phenoml.api.resources.agent.types.JsonPatchOperation;
import java.util.List;
import java.util.concurrent.CompletableFuture;
import java.util.function.Supplier;

public class AsyncAgentClient {
    protected final ClientOptions clientOptions;

    private final AsyncRawAgentClient rawClient;

    protected final Supplier<AsyncPromptsClient> promptsClient;

    public AsyncAgentClient(ClientOptions clientOptions) {
        this.clientOptions = clientOptions;
        this.rawClient = new AsyncRawAgentClient(clientOptions);
        this.promptsClient = Suppliers.memoize(() -> new AsyncPromptsClient(clientOptions));
    }

    /**
     * Get responses with HTTP metadata like headers
     */
    public AsyncRawAgentClient withRawResponse() {
        return this.rawClient;
    }

    /**
     * Creates a new PhenoAgent with specified configuration
     */
    public CompletableFuture<AgentResponse> create(AgentCreateRequest request) {
        return this.rawClient.create(request).thenApply(response -> response.body());
    }

    /**
     * Creates a new PhenoAgent with specified configuration
     */
    public CompletableFuture<AgentResponse> create(AgentCreateRequest request, RequestOptions requestOptions) {
        return this.rawClient.create(request, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Retrieves a list of PhenoAgents belonging to the authenticated user
     */
    public CompletableFuture<AgentListResponse> list() {
        return this.rawClient.list().thenApply(response -> response.body());
    }

    /**
     * Retrieves a list of PhenoAgents belonging to the authenticated user
     */
    public CompletableFuture<AgentListResponse> list(AgentListRequest request) {
        return this.rawClient.list(request).thenApply(response -> response.body());
    }

    /**
     * Retrieves a list of PhenoAgents belonging to the authenticated user
     */
    public CompletableFuture<AgentListResponse> list(AgentListRequest request, RequestOptions requestOptions) {
        return this.rawClient.list(request, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Retrieves a specific agent by its ID
     */
    public CompletableFuture<AgentResponse> get(String id) {
        return this.rawClient.get(id).thenApply(response -> response.body());
    }

    /**
     * Retrieves a specific agent by its ID
     */
    public CompletableFuture<AgentResponse> get(String id, RequestOptions requestOptions) {
        return this.rawClient.get(id, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Updates an existing agent's configuration
     */
    public CompletableFuture<AgentResponse> update(String id) {
        return this.rawClient.update(id).thenApply(response -> response.body());
    }

    /**
     * Updates an existing agent's configuration
     */
    public CompletableFuture<AgentResponse> update(String id, AgentUpdateRequest request) {
        return this.rawClient.update(id, request).thenApply(response -> response.body());
    }

    /**
     * Updates an existing agent's configuration
     */
    public CompletableFuture<AgentResponse> update(
            String id, AgentUpdateRequest request, RequestOptions requestOptions) {
        return this.rawClient.update(id, request, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Deletes an existing agent
     */
    public CompletableFuture<AgentDeleteResponse> delete(String id) {
        return this.rawClient.delete(id).thenApply(response -> response.body());
    }

    /**
     * Deletes an existing agent
     */
    public CompletableFuture<AgentDeleteResponse> delete(String id, RequestOptions requestOptions) {
        return this.rawClient.delete(id, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Patches an existing agent's configuration
     */
    public CompletableFuture<AgentResponse> patch(String id, List<JsonPatchOperation> request) {
        return this.rawClient.patch(id, request).thenApply(response -> response.body());
    }

    /**
     * Patches an existing agent's configuration
     */
    public CompletableFuture<AgentResponse> patch(
            String id, List<JsonPatchOperation> request, RequestOptions requestOptions) {
        return this.rawClient.patch(id, request, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Send a message to an agent and receive a response
     */
    public CompletableFuture<AgentChatResponse> chat(AgentChatRequest request) {
        return this.rawClient.chat(request).thenApply(response -> response.body());
    }

    /**
     * Send a message to an agent and receive a response
     */
    public CompletableFuture<AgentChatResponse> chat(AgentChatRequest request, RequestOptions requestOptions) {
        return this.rawClient.chat(request, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Retrieves a list of chat messages for a given chat session
     */
    public CompletableFuture<AgentGetChatMessagesResponse> getChatMessages(AgentGetChatMessagesRequest request) {
        return this.rawClient.getChatMessages(request).thenApply(response -> response.body());
    }

    /**
     * Retrieves a list of chat messages for a given chat session
     */
    public CompletableFuture<AgentGetChatMessagesResponse> getChatMessages(
            AgentGetChatMessagesRequest request, RequestOptions requestOptions) {
        return this.rawClient.getChatMessages(request, requestOptions).thenApply(response -> response.body());
    }

    public AsyncPromptsClient prompts() {
        return this.promptsClient.get();
    }
}
