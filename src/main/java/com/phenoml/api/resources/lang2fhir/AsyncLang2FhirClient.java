/**
 * This file was auto-generated by Fern from our API Definition.
 */

package com.phenoml.api.resources.lang2fhir;

import com.phenoml.api.core.ClientOptions;
import com.phenoml.api.core.RequestOptions;
import com.phenoml.api.resources.lang2fhir.requests.CreateMultiRequest;
import com.phenoml.api.resources.lang2fhir.requests.CreateRequest;
import com.phenoml.api.resources.lang2fhir.requests.DocumentRequest;
import com.phenoml.api.resources.lang2fhir.requests.ProfileUploadRequest;
import com.phenoml.api.resources.lang2fhir.requests.SearchRequest;
import com.phenoml.api.resources.lang2fhir.types.CreateMultiResponse;
import com.phenoml.api.resources.lang2fhir.types.Lang2FhirUploadProfileResponse;
import com.phenoml.api.resources.lang2fhir.types.SearchResponse;
import java.lang.Object;
import java.lang.String;
import java.util.Map;
import java.util.concurrent.CompletableFuture;

public class AsyncLang2FhirClient {
  protected final ClientOptions clientOptions;

  private final AsyncRawLang2FhirClient rawClient;

  public AsyncLang2FhirClient(ClientOptions clientOptions) {
    this.clientOptions = clientOptions;
    this.rawClient = new AsyncRawLang2FhirClient(clientOptions);
  }

  /**
   * Get responses with HTTP metadata like headers
   */
  public AsyncRawLang2FhirClient withRawResponse() {
    return this.rawClient;
  }

  /**
   * Converts natural language text into a structured FHIR resource
   */
  public CompletableFuture<Map<String, Object>> create(CreateRequest request) {
    return this.rawClient.create(request).thenApply(response -> response.body());
  }

  /**
   * Converts natural language text into a structured FHIR resource
   */
  public CompletableFuture<Map<String, Object>> create(CreateRequest request,
      RequestOptions requestOptions) {
    return this.rawClient.create(request, requestOptions).thenApply(response -> response.body());
  }

  /**
   * Analyzes natural language text and extracts multiple FHIR resources, returning them as a transaction Bundle.
   * Automatically detects Patient, Condition, MedicationRequest, Observation, and other resource types from the text.
   * Resources are linked with proper references (e.g., Conditions reference the Patient).
   */
  public CompletableFuture<CreateMultiResponse> createMulti(CreateMultiRequest request) {
    return this.rawClient.createMulti(request).thenApply(response -> response.body());
  }

  /**
   * Analyzes natural language text and extracts multiple FHIR resources, returning them as a transaction Bundle.
   * Automatically detects Patient, Condition, MedicationRequest, Observation, and other resource types from the text.
   * Resources are linked with proper references (e.g., Conditions reference the Patient).
   */
  public CompletableFuture<CreateMultiResponse> createMulti(CreateMultiRequest request,
      RequestOptions requestOptions) {
    return this.rawClient.createMulti(request, requestOptions).thenApply(response -> response.body());
  }

  /**
   * Converts natural language text into FHIR search parameters.
   * Automatically identifies the appropriate FHIR resource type and generates valid search query parameters.
   * <p>Supported resource types include: AllergyIntolerance, Appointment, CarePlan, CareTeam, Condition,
   * Coverage, Device, DiagnosticReport, DocumentReference, Encounter, Goal, Immunization, Location,
   * Medication, MedicationRequest, Observation, Organization, Patient, PlanDefinition, Practitioner,
   * PractitionerRole, Procedure, Provenance, Questionnaire, QuestionnaireResponse, RelatedPerson,
   * Schedule, ServiceRequest, Slot, and Specimen.</p>
   */
  public CompletableFuture<SearchResponse> search(SearchRequest request) {
    return this.rawClient.search(request).thenApply(response -> response.body());
  }

  /**
   * Converts natural language text into FHIR search parameters.
   * Automatically identifies the appropriate FHIR resource type and generates valid search query parameters.
   * <p>Supported resource types include: AllergyIntolerance, Appointment, CarePlan, CareTeam, Condition,
   * Coverage, Device, DiagnosticReport, DocumentReference, Encounter, Goal, Immunization, Location,
   * Medication, MedicationRequest, Observation, Organization, Patient, PlanDefinition, Practitioner,
   * PractitionerRole, Procedure, Provenance, Questionnaire, QuestionnaireResponse, RelatedPerson,
   * Schedule, ServiceRequest, Slot, and Specimen.</p>
   */
  public CompletableFuture<SearchResponse> search(SearchRequest request,
      RequestOptions requestOptions) {
    return this.rawClient.search(request, requestOptions).thenApply(response -> response.body());
  }

  /**
   * Upload a custom FHIR StructureDefinition profile for use with the lang2fhir service.
   * <p>All metadata is derived from the StructureDefinition JSON itself. The lowercase <code>id</code> field
   * from the StructureDefinition is used as the profile's unique identifier and lookup key.
   * To use the uploaded profile with <code>/lang2fhir/create</code>, pass this id as the <code>resource</code> parameter.</p>
   * <p>Uploads will be rejected if:</p>
   * <ul>
   * <li>A built-in US Core or R4 base profile already exists with the same id</li>
   * <li>A custom profile with the same id has already been uploaded</li>
   * <li>A custom profile with the same url has already been uploaded</li>
   * </ul>
   */
  public CompletableFuture<Lang2FhirUploadProfileResponse> uploadProfile(
      ProfileUploadRequest request) {
    return this.rawClient.uploadProfile(request).thenApply(response -> response.body());
  }

  /**
   * Upload a custom FHIR StructureDefinition profile for use with the lang2fhir service.
   * <p>All metadata is derived from the StructureDefinition JSON itself. The lowercase <code>id</code> field
   * from the StructureDefinition is used as the profile's unique identifier and lookup key.
   * To use the uploaded profile with <code>/lang2fhir/create</code>, pass this id as the <code>resource</code> parameter.</p>
   * <p>Uploads will be rejected if:</p>
   * <ul>
   * <li>A built-in US Core or R4 base profile already exists with the same id</li>
   * <li>A custom profile with the same id has already been uploaded</li>
   * <li>A custom profile with the same url has already been uploaded</li>
   * </ul>
   */
  public CompletableFuture<Lang2FhirUploadProfileResponse> uploadProfile(
      ProfileUploadRequest request, RequestOptions requestOptions) {
    return this.rawClient.uploadProfile(request, requestOptions).thenApply(response -> response.body());
  }

  /**
   * Extracts text from a document (PDF or image) and converts it into a structured FHIR resource
   */
  public CompletableFuture<Map<String, Object>> document(DocumentRequest request) {
    return this.rawClient.document(request).thenApply(response -> response.body());
  }

  /**
   * Extracts text from a document (PDF or image) and converts it into a structured FHIR resource
   */
  public CompletableFuture<Map<String, Object>> document(DocumentRequest request,
      RequestOptions requestOptions) {
    return this.rawClient.document(request, requestOptions).thenApply(response -> response.body());
  }
}
