/**
 * This file was auto-generated by Fern from our API Definition.
 */
package com.phenoml.api.resources.agent.types;

import com.fasterxml.jackson.annotation.JsonAnyGetter;
import com.fasterxml.jackson.annotation.JsonAnySetter;
import com.fasterxml.jackson.annotation.JsonCreator;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.annotation.JsonSetter;
import com.fasterxml.jackson.annotation.JsonValue;
import com.fasterxml.jackson.annotation.Nulls;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import com.phenoml.api.core.ObjectMappers;
import java.util.HashMap;
import java.util.Map;
import java.util.Objects;
import java.util.Optional;

@JsonInclude(JsonInclude.Include.NON_ABSENT)
@JsonDeserialize(builder = AgentChatStreamEvent.Builder.class)
public final class AgentChatStreamEvent {
    private final Optional<Type> type;

    private final Optional<String> sessionId;

    private final Optional<String> content;

    private final Optional<Boolean> success;

    private final Optional<String> message;

    private final Optional<String> functionName;

    private final Optional<Map<String, Object>> functionArgs;

    private final Optional<Map<String, Object>> functionResult;

    private final Map<String, Object> additionalProperties;

    private AgentChatStreamEvent(
            Optional<Type> type,
            Optional<String> sessionId,
            Optional<String> content,
            Optional<Boolean> success,
            Optional<String> message,
            Optional<String> functionName,
            Optional<Map<String, Object>> functionArgs,
            Optional<Map<String, Object>> functionResult,
            Map<String, Object> additionalProperties) {
        this.type = type;
        this.sessionId = sessionId;
        this.content = content;
        this.success = success;
        this.message = message;
        this.functionName = functionName;
        this.functionArgs = functionArgs;
        this.functionResult = functionResult;
        this.additionalProperties = additionalProperties;
    }

    /**
     * @return The event type
     */
    @JsonProperty("type")
    public Optional<Type> getType() {
        return type;
    }

    /**
     * @return Chat session ID
     */
    @JsonProperty("session_id")
    public Optional<String> getSessionId() {
        return sessionId;
    }

    /**
     * @return Incremental text content (present in content_delta events)
     */
    @JsonProperty("content")
    public Optional<String> getContent() {
        return content;
    }

    /**
     * @return Whether the operation was successful
     */
    @JsonProperty("success")
    public Optional<Boolean> getSuccess() {
        return success;
    }

    /**
     * @return Status message
     */
    @JsonProperty("message")
    public Optional<String> getMessage() {
        return message;
    }

    /**
     * @return Tool/function name (present in tool_use and tool_result events)
     */
    @JsonProperty("function_name")
    public Optional<String> getFunctionName() {
        return functionName;
    }

    /**
     * @return Tool arguments (present in tool_use events)
     */
    @JsonProperty("function_args")
    public Optional<Map<String, Object>> getFunctionArgs() {
        return functionArgs;
    }

    /**
     * @return Tool execution result (present in tool_result events)
     */
    @JsonProperty("function_result")
    public Optional<Map<String, Object>> getFunctionResult() {
        return functionResult;
    }

    @java.lang.Override
    public boolean equals(Object other) {
        if (this == other) return true;
        return other instanceof AgentChatStreamEvent && equalTo((AgentChatStreamEvent) other);
    }

    @JsonAnyGetter
    public Map<String, Object> getAdditionalProperties() {
        return this.additionalProperties;
    }

    private boolean equalTo(AgentChatStreamEvent other) {
        return type.equals(other.type)
                && sessionId.equals(other.sessionId)
                && content.equals(other.content)
                && success.equals(other.success)
                && message.equals(other.message)
                && functionName.equals(other.functionName)
                && functionArgs.equals(other.functionArgs)
                && functionResult.equals(other.functionResult);
    }

    @java.lang.Override
    public int hashCode() {
        return Objects.hash(
                this.type,
                this.sessionId,
                this.content,
                this.success,
                this.message,
                this.functionName,
                this.functionArgs,
                this.functionResult);
    }

    @java.lang.Override
    public String toString() {
        return ObjectMappers.stringify(this);
    }

    public static Builder builder() {
        return new Builder();
    }

    @JsonIgnoreProperties(ignoreUnknown = true)
    public static final class Builder {
        private Optional<Type> type = Optional.empty();

        private Optional<String> sessionId = Optional.empty();

        private Optional<String> content = Optional.empty();

        private Optional<Boolean> success = Optional.empty();

        private Optional<String> message = Optional.empty();

        private Optional<String> functionName = Optional.empty();

        private Optional<Map<String, Object>> functionArgs = Optional.empty();

        private Optional<Map<String, Object>> functionResult = Optional.empty();

        @JsonAnySetter
        private Map<String, Object> additionalProperties = new HashMap<>();

        private Builder() {}

        public Builder from(AgentChatStreamEvent other) {
            type(other.getType());
            sessionId(other.getSessionId());
            content(other.getContent());
            success(other.getSuccess());
            message(other.getMessage());
            functionName(other.getFunctionName());
            functionArgs(other.getFunctionArgs());
            functionResult(other.getFunctionResult());
            return this;
        }

        /**
         * <p>The event type</p>
         */
        @JsonSetter(value = "type", nulls = Nulls.SKIP)
        public Builder type(Optional<Type> type) {
            this.type = type;
            return this;
        }

        public Builder type(Type type) {
            this.type = Optional.ofNullable(type);
            return this;
        }

        /**
         * <p>Chat session ID</p>
         */
        @JsonSetter(value = "session_id", nulls = Nulls.SKIP)
        public Builder sessionId(Optional<String> sessionId) {
            this.sessionId = sessionId;
            return this;
        }

        public Builder sessionId(String sessionId) {
            this.sessionId = Optional.ofNullable(sessionId);
            return this;
        }

        /**
         * <p>Incremental text content (present in content_delta events)</p>
         */
        @JsonSetter(value = "content", nulls = Nulls.SKIP)
        public Builder content(Optional<String> content) {
            this.content = content;
            return this;
        }

        public Builder content(String content) {
            this.content = Optional.ofNullable(content);
            return this;
        }

        /**
         * <p>Whether the operation was successful</p>
         */
        @JsonSetter(value = "success", nulls = Nulls.SKIP)
        public Builder success(Optional<Boolean> success) {
            this.success = success;
            return this;
        }

        public Builder success(Boolean success) {
            this.success = Optional.ofNullable(success);
            return this;
        }

        /**
         * <p>Status message</p>
         */
        @JsonSetter(value = "message", nulls = Nulls.SKIP)
        public Builder message(Optional<String> message) {
            this.message = message;
            return this;
        }

        public Builder message(String message) {
            this.message = Optional.ofNullable(message);
            return this;
        }

        /**
         * <p>Tool/function name (present in tool_use and tool_result events)</p>
         */
        @JsonSetter(value = "function_name", nulls = Nulls.SKIP)
        public Builder functionName(Optional<String> functionName) {
            this.functionName = functionName;
            return this;
        }

        public Builder functionName(String functionName) {
            this.functionName = Optional.ofNullable(functionName);
            return this;
        }

        /**
         * <p>Tool arguments (present in tool_use events)</p>
         */
        @JsonSetter(value = "function_args", nulls = Nulls.SKIP)
        public Builder functionArgs(Optional<Map<String, Object>> functionArgs) {
            this.functionArgs = functionArgs;
            return this;
        }

        public Builder functionArgs(Map<String, Object> functionArgs) {
            this.functionArgs = Optional.ofNullable(functionArgs);
            return this;
        }

        /**
         * <p>Tool execution result (present in tool_result events)</p>
         */
        @JsonSetter(value = "function_result", nulls = Nulls.SKIP)
        public Builder functionResult(Optional<Map<String, Object>> functionResult) {
            this.functionResult = functionResult;
            return this;
        }

        public Builder functionResult(Map<String, Object> functionResult) {
            this.functionResult = Optional.ofNullable(functionResult);
            return this;
        }

        public AgentChatStreamEvent build() {
            return new AgentChatStreamEvent(
                    type,
                    sessionId,
                    content,
                    success,
                    message,
                    functionName,
                    functionArgs,
                    functionResult,
                    additionalProperties);
        }
    }

    public static final class Type {
        public static final Type MESSAGE_START = new Type(Value.MESSAGE_START, "message_start");

        public static final Type CONTENT_DELTA = new Type(Value.CONTENT_DELTA, "content_delta");

        public static final Type MESSAGE_END = new Type(Value.MESSAGE_END, "message_end");

        public static final Type ERROR = new Type(Value.ERROR, "error");

        public static final Type TOOL_USE = new Type(Value.TOOL_USE, "tool_use");

        public static final Type TOOL_RESULT = new Type(Value.TOOL_RESULT, "tool_result");

        private final Value value;

        private final String string;

        Type(Value value, String string) {
            this.value = value;
            this.string = string;
        }

        public Value getEnumValue() {
            return value;
        }

        @java.lang.Override
        @JsonValue
        public String toString() {
            return this.string;
        }

        @java.lang.Override
        public boolean equals(Object other) {
            return (this == other) || (other instanceof Type && this.string.equals(((Type) other).string));
        }

        @java.lang.Override
        public int hashCode() {
            return this.string.hashCode();
        }

        public <T> T visit(Visitor<T> visitor) {
            switch (value) {
                case MESSAGE_START:
                    return visitor.visitMessageStart();
                case CONTENT_DELTA:
                    return visitor.visitContentDelta();
                case MESSAGE_END:
                    return visitor.visitMessageEnd();
                case ERROR:
                    return visitor.visitError();
                case TOOL_USE:
                    return visitor.visitToolUse();
                case TOOL_RESULT:
                    return visitor.visitToolResult();
                case UNKNOWN:
                default:
                    return visitor.visitUnknown(string);
            }
        }

        @JsonCreator(mode = JsonCreator.Mode.DELEGATING)
        public static Type valueOf(String value) {
            switch (value) {
                case "message_start":
                    return MESSAGE_START;
                case "content_delta":
                    return CONTENT_DELTA;
                case "message_end":
                    return MESSAGE_END;
                case "error":
                    return ERROR;
                case "tool_use":
                    return TOOL_USE;
                case "tool_result":
                    return TOOL_RESULT;
                default:
                    return new Type(Value.UNKNOWN, value);
            }
        }

        public enum Value {
            MESSAGE_START,

            CONTENT_DELTA,

            TOOL_USE,

            TOOL_RESULT,

            MESSAGE_END,

            ERROR,

            UNKNOWN
        }

        public interface Visitor<T> {
            T visitMessageStart();

            T visitContentDelta();

            T visitToolUse();

            T visitToolResult();

            T visitMessageEnd();

            T visitError();

            T visitUnknown(String unknownType);
        }
    }
}
